import{d as t,e,f as o,g as r}from"./p-4ab5e0ca.js";class i{constructor(e){t(this,e),this.parent=null,this.project=()=>{if(!this.projected){let t=[];if(this.parent)return void(t=[...Array.from(this.parent.children)]).map(t=>this.portalNode.shadowRoot.querySelector("dom-portal").appendChild(t));(t=this.element.shadowRoot.querySelector("slot").assignedNodes()).map(t=>this.portalNode.appendChild(t))}},this.getContainer=t=>this.container?"string"==typeof this.container?t.querySelector(this.container):this.container:t.body}portalIdChanged(){!this.projected&&this.portalNode&&(this.portalNode.portalId=this.portalId)}connectedCallback(){if((this.projected||!this.element||(this.portalId=(s.push(this.element),s.length-1),!document.querySelector(`[portal-id="${this.portalId}"]`)))&&!this.projected){const t=this.element.ownerDocument,e=this.getContainer(t);if(null===this.element.parentElement&&this.element.parentNode&&this.element.parentNode.host){const o=this.element.parentNode.host;this.portalNode=t.createElement(o.tagName),o.setAttribute("portal-id",`${this.portalId}`),this.portalNode.setAttribute("portal-id",`${this.portalId}`),this.portalNode.setAttribute("projected",""),[...Array.from(o.children)].forEach(t=>this.portalNode.appendChild(t)),e.appendChild(this.portalNode),this.addMO(o),this.parent=o}else this.portalNode=t.createElement(this.element.tagName),this.portalNode.setAttribute("projected",""),this.portalNode.setAttribute("portal-id",`${this.portalId}`),e.appendChild(this.portalNode),this.addMO()}}disconnectedCallback(){var t;this.projected||(this.portalNode.remove(),t=this.portalId,s.splice(s.findIndex(e=>e.portalId===t),1),s.forEach((t,e)=>{t.portalId=e}))}addMO(t=this.element){"MutationObserver"in window&&(this.mo=new MutationObserver(this.project),this.mo.observe(t,{childList:!0,attributes:!0,subtree:!0}))}render(){return e(o,this.projected?{style:{display:"contents"}}:{style:{display:"none"}},e("slot",null))}get element(){return r(this)}static get watchers(){return{portalId:["portalIdChanged"]}}}let s=[];export{i as dom_portal};